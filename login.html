<body>
    <div id="id01" class="modal">
        <div class="container">
            <h1>Login</h1>
            <p>Please fill in this form to login.</p>
            <hr>
            <label for="username"><b>Username</b></label>
            <input id="username" type="text" placeholder="Enter Username" name="username" required>
            <br>
            <label for="psw"><b>Password</b></label>
            <input id="password" type="password" placeholder="Enter Password" name="psw" required>
            <br>

            <button id="btn" type="button" name="btn">Login</button>
            <a href="./signup.html">signup</a>
        </div>
    </div>
    </div>

    <script>
        let btn = document.getElementById('btn')
        let username = document.getElementById('username')
        let password = document.getElementById('password')
        let xhttp = new XMLHttpRequest();
        btn.addEventListener('click', () => {
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    let json = JSON.parse(this.responseText)
                  //  console.log(this.getResponseHeader('Cookie'));
                    document.getElementById("id01").innerHTML = json.msg
                    console.log(document.cookie);
                }
            };
            let json = {
                username: username.value,
                password: password.value
            }
            xhttp.open("Post", "http://127.0.0.1:3000/login", true);
            xhttp.withCredentials = true
            xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhttp.send(JSON.stringify(json));
        })
    </script>

</body>

</html>